<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Module: PokeBattle_BattleCommon
  
    &mdash; Documentation by YARD 0.9.27
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" />

  <link rel="stylesheet" href="css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "PokeBattle_BattleCommon";
  relpath = '';
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="_index.html">Index (P)</a> &raquo;
    
    
    <span class="title">PokeBattle_BattleCommon</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Module: PokeBattle_BattleCommon
  
  
  
</h1>
<div class="box_info">
  

  
  
  
  
  

  
  <dl>
    <dt>Included in:</dt>
    <dd><span class='object_link'><a href="PokeBattle_Battle.html" title="PokeBattle_Battle (class)">PokeBattle_Battle</a></span>, <span class='object_link'><a href="PokeBattle_SafariZone.html" title="PokeBattle_SafariZone (class)">PokeBattle_SafariZone</a></span></dd>
  </dl>
  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>scripts/PokeBattle_Battle.rb</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>Catching and storing Pokémon.</p>


  </div>
</div>
<div class="tags">
  

</div>






  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#pbStorePokemon-instance_method" title="#pbStorePokemon (instance method)">#<strong>pbStorePokemon</strong>(pokemon)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#pbThrowPokeBall-instance_method" title="#pbThrowPokeBall (instance method)">#<strong>pbThrowPokeBall</strong>(idxPokemon, ball, rareness = nil, showplayer = false, safari = false, firstfailedthrowatsafari = false)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Retuns: 1 - success at capturing,          0 - fail at capturing and at fetching ball,        -1 - fail at capturing and success at fetching ball.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#tryFetchingBall-instance_method" title="#tryFetchingBall (instance method)">#<strong>tryFetchingBall</strong>(ball, safari, firstfailedthrowatsafari)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Ball Fetch.</p>
</div></span>
  
</li>

      
    </ul>
  



  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="pbStorePokemon-instance_method">
  
    #<strong>pbStorePokemon</strong>(pokemon)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'scripts/PokeBattle_Battle.rb', line 13</span>

<span class='kw'>def</span> <span class='id identifier rubyid_pbStorePokemon'>pbStorePokemon</span><span class='lparen'>(</span><span class='id identifier rubyid_pokemon'>pokemon</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='op'>!</span><span class='lparen'>(</span><span class='id identifier rubyid_pokemon'>pokemon</span><span class='period'>.</span><span class='id identifier rubyid_isShadow?'>isShadow?</span> <span class='kw'>rescue</span> <span class='kw'>false</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_pbDisplayConfirm'>pbDisplayConfirm</span><span class='lparen'>(</span><span class='id identifier rubyid__INTL'><span class='object_link'><a href="top-level-namespace.html#_INTL-instance_method" title="#_INTL (method)">_INTL</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>¿Quieres ponerle un mote a {1}?</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span><span class='id identifier rubyid_pokemon'>pokemon</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_species'>species</span><span class='op'>=</span><span class='const'>PBSpecies</span><span class='period'>.</span><span class='id identifier rubyid_getName'>getName</span><span class='lparen'>(</span><span class='id identifier rubyid_pokemon'>pokemon</span><span class='period'>.</span><span class='id identifier rubyid_species'>species</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_nickname'>nickname</span><span class='op'>=</span><span class='ivar'>@scene</span><span class='period'>.</span><span class='id identifier rubyid_pbNameEntry'>pbNameEntry</span><span class='lparen'>(</span><span class='id identifier rubyid__INTL'><span class='object_link'><a href="top-level-namespace.html#_INTL-instance_method" title="#_INTL (method)">_INTL</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Mote de {1}</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span><span class='id identifier rubyid_species'>species</span><span class='rparen'>)</span><span class='comma'>,</span><span class='id identifier rubyid_pokemon'>pokemon</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_pokemon'>pokemon</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='op'>=</span><span class='id identifier rubyid_nickname'>nickname</span> <span class='kw'>if</span> <span class='id identifier rubyid_nickname'>nickname</span><span class='op'>!=</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_oldcurbox'>oldcurbox</span><span class='op'>=</span><span class='ivar'>@peer</span><span class='period'>.</span><span class='id identifier rubyid_pbCurrentBox'>pbCurrentBox</span><span class='lparen'>(</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_storedbox'>storedbox</span><span class='op'>=</span><span class='ivar'>@peer</span><span class='period'>.</span><span class='id identifier rubyid_pbStorePokemon'>pbStorePokemon</span><span class='lparen'>(</span><span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_pbPlayer'>pbPlayer</span><span class='comma'>,</span><span class='id identifier rubyid_pokemon'>pokemon</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_creator'>creator</span><span class='op'>=</span><span class='ivar'>@peer</span><span class='period'>.</span><span class='id identifier rubyid_pbGetStorageCreator'>pbGetStorageCreator</span><span class='lparen'>(</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='kw'>if</span> <span class='id identifier rubyid_storedbox'>storedbox</span><span class='op'>&lt;</span><span class='int'>0</span>
  <span class='id identifier rubyid_curboxname'>curboxname</span><span class='op'>=</span><span class='ivar'>@peer</span><span class='period'>.</span><span class='id identifier rubyid_pbBoxName'>pbBoxName</span><span class='lparen'>(</span><span class='id identifier rubyid_oldcurbox'>oldcurbox</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_boxname'>boxname</span><span class='op'>=</span><span class='ivar'>@peer</span><span class='period'>.</span><span class='id identifier rubyid_pbBoxName'>pbBoxName</span><span class='lparen'>(</span><span class='id identifier rubyid_storedbox'>storedbox</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_storedbox'>storedbox</span><span class='op'>!=</span><span class='id identifier rubyid_oldcurbox'>oldcurbox</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_creator'>creator</span>
      <span class='id identifier rubyid_pbDisplayPaused'>pbDisplayPaused</span><span class='lparen'>(</span><span class='id identifier rubyid__INTL'><span class='object_link'><a href="top-level-namespace.html#_INTL-instance_method" title="#_INTL (method)">_INTL</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>La caja \&quot;{1}\&quot; del PC de {2} está llena.</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span><span class='id identifier rubyid_curboxname'>curboxname</span><span class='comma'>,</span><span class='id identifier rubyid_creator'>creator</span><span class='rparen'>)</span><span class='rparen'>)</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_pbDisplayPaused'>pbDisplayPaused</span><span class='lparen'>(</span><span class='id identifier rubyid__INTL'><span class='object_link'><a href="top-level-namespace.html#_INTL-instance_method" title="#_INTL (method)">_INTL</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>La caja \&quot;{1}\&quot; del PC de Alguien está llena.</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span><span class='id identifier rubyid_curboxname'>curboxname</span><span class='rparen'>)</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_pbDisplayPaused'>pbDisplayPaused</span><span class='lparen'>(</span><span class='id identifier rubyid__INTL'><span class='object_link'><a href="top-level-namespace.html#_INTL-instance_method" title="#_INTL (method)">_INTL</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>{1} fue transferido a la caja \&quot;{2}\&quot;.</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span><span class='id identifier rubyid_pokemon'>pokemon</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span><span class='id identifier rubyid_boxname'>boxname</span><span class='rparen'>)</span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_creator'>creator</span>
      <span class='id identifier rubyid_pbDisplayPaused'>pbDisplayPaused</span><span class='lparen'>(</span><span class='id identifier rubyid__INTL'><span class='object_link'><a href="top-level-namespace.html#_INTL-instance_method" title="#_INTL (method)">_INTL</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>{1} fue transferido al PC de {2}.</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span><span class='id identifier rubyid_pokemon'>pokemon</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span><span class='id identifier rubyid_creator'>creator</span><span class='rparen'>)</span><span class='rparen'>)</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_pbDisplayPaused'>pbDisplayPaused</span><span class='lparen'>(</span><span class='id identifier rubyid__INTL'><span class='object_link'><a href="top-level-namespace.html#_INTL-instance_method" title="#_INTL (method)">_INTL</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>{1} fue transferido al PC de Alguien.</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span><span class='id identifier rubyid_pokemon'>pokemon</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_pbDisplayPaused'>pbDisplayPaused</span><span class='lparen'>(</span><span class='id identifier rubyid__INTL'><span class='object_link'><a href="top-level-namespace.html#_INTL-instance_method" title="#_INTL (method)">_INTL</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Fue guardado en la caja \&quot;{1}\&quot;.</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span><span class='id identifier rubyid_boxname'>boxname</span><span class='rparen'>)</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="pbThrowPokeBall-instance_method">
  
    #<strong>pbThrowPokeBall</strong>(idxPokemon, ball, rareness = nil, showplayer = false, safari = false, firstfailedthrowatsafari = false)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Retuns: 1 - success at capturing, </p>

<pre class="code ruby"><code class="ruby"> 0 - fail at capturing and at fetching ball,
-1 - fail at capturing and success at fetching ball
</code></pre>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'scripts/PokeBattle_Battle.rb', line 82</span>

<span class='kw'>def</span> <span class='id identifier rubyid_pbThrowPokeBall'>pbThrowPokeBall</span><span class='lparen'>(</span><span class='id identifier rubyid_idxPokemon'>idxPokemon</span><span class='comma'>,</span><span class='id identifier rubyid_ball'>ball</span><span class='comma'>,</span><span class='id identifier rubyid_rareness'>rareness</span><span class='op'>=</span><span class='kw'>nil</span><span class='comma'>,</span><span class='id identifier rubyid_showplayer'>showplayer</span><span class='op'>=</span><span class='kw'>false</span><span class='comma'>,</span><span class='id identifier rubyid_safari'>safari</span><span class='op'>=</span><span class='kw'>false</span><span class='comma'>,</span><span class='id identifier rubyid_firstfailedthrowatsafari'>firstfailedthrowatsafari</span><span class='op'>=</span><span class='kw'>false</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_ret'>ret</span><span class='op'>=</span><span class='int'>0</span>
  <span class='id identifier rubyid_itemname'>itemname</span><span class='op'>=</span><span class='const'>PBItems</span><span class='period'>.</span><span class='id identifier rubyid_getName'>getName</span><span class='lparen'>(</span><span class='id identifier rubyid_ball'>ball</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_battler'>battler</span><span class='op'>=</span><span class='kw'>nil</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_pbIsOpposing?'>pbIsOpposing?</span><span class='lparen'>(</span><span class='id identifier rubyid_idxPokemon'>idxPokemon</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_battler'>battler</span><span class='op'>=</span><span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_battlers'>battlers</span><span class='lbracket'>[</span><span class='id identifier rubyid_idxPokemon'>idxPokemon</span><span class='rbracket'>]</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_battler'>battler</span><span class='op'>=</span><span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_battlers'>battlers</span><span class='lbracket'>[</span><span class='id identifier rubyid_idxPokemon'>idxPokemon</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_pbOppositeOpposing'>pbOppositeOpposing</span>
  <span class='kw'>end</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_battler'>battler</span><span class='period'>.</span><span class='id identifier rubyid_isFainted?'>isFainted?</span>
    <span class='id identifier rubyid_battler'>battler</span><span class='op'>=</span><span class='id identifier rubyid_battler'>battler</span><span class='period'>.</span><span class='id identifier rubyid_pbPartner'>pbPartner</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_pbDisplayBrief'>pbDisplayBrief</span><span class='lparen'>(</span><span class='id identifier rubyid__INTL'><span class='object_link'><a href="top-level-namespace.html#_INTL-instance_method" title="#_INTL (method)">_INTL</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>{1} usó una {2}.</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span><span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_pbPlayer'>pbPlayer</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span><span class='id identifier rubyid_itemname'>itemname</span><span class='rparen'>)</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_battler'>battler</span><span class='period'>.</span><span class='id identifier rubyid_isFainted?'>isFainted?</span>
    <span class='id identifier rubyid_pbDisplay'>pbDisplay</span><span class='lparen'>(</span><span class='id identifier rubyid__INTL'><span class='object_link'><a href="top-level-namespace.html#_INTL-instance_method" title="#_INTL (method)">_INTL</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Pero no hay objetivo...</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='rparen'>)</span>
    <span class='kw'>return</span> <span class='id identifier rubyid_tryFetchingBall'>tryFetchingBall</span><span class='lparen'>(</span><span class='id identifier rubyid_ball'>ball</span><span class='comma'>,</span><span class='id identifier rubyid_safari'>safari</span><span class='comma'>,</span><span class='id identifier rubyid_firstfailedthrowatsafari'>firstfailedthrowatsafari</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='kw'>if</span> <span class='ivar'>@opponent</span> <span class='op'>&amp;&amp;</span> <span class='lparen'>(</span><span class='op'>!</span><span class='id identifier rubyid_pbIsSnagBall?'><span class='object_link'><a href="top-level-namespace.html#pbIsSnagBall%3F-instance_method" title="#pbIsSnagBall? (method)">pbIsSnagBall?</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_ball'>ball</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='op'>!</span><span class='id identifier rubyid_battler'>battler</span><span class='period'>.</span><span class='id identifier rubyid_isShadow?'>isShadow?</span><span class='rparen'>)</span>
    <span class='ivar'>@scene</span><span class='period'>.</span><span class='id identifier rubyid_pbThrowAndDeflect'>pbThrowAndDeflect</span><span class='lparen'>(</span><span class='id identifier rubyid_ball'>ball</span><span class='comma'>,</span><span class='int'>1</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_pbDisplay'>pbDisplay</span><span class='lparen'>(</span><span class='id identifier rubyid__INTL'><span class='object_link'><a href="top-level-namespace.html#_INTL-instance_method" title="#_INTL (method)">_INTL</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>¡El entrenador ha bloqueado la Poké Ball!\n¡No seas un ladrón!</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_ret'>ret</span><span class='op'>=</span><span class='id identifier rubyid_tryFetchingBall'>tryFetchingBall</span><span class='lparen'>(</span><span class='id identifier rubyid_ball'>ball</span><span class='comma'>,</span><span class='id identifier rubyid_safari'>safari</span><span class='comma'>,</span><span class='id identifier rubyid_firstfailedthrowatsafari'>firstfailedthrowatsafari</span><span class='rparen'>)</span>
  <span class='kw'>elsif</span> <span class='gvar'>$game_switches</span><span class='lbracket'>[</span><span class='int'>36</span><span class='rbracket'>]</span>
   <span class='ivar'>@scene</span><span class='period'>.</span><span class='id identifier rubyid_pbThrowAndDeflect'>pbThrowAndDeflect</span><span class='lparen'>(</span><span class='id identifier rubyid_ball'>ball</span><span class='comma'>,</span><span class='int'>1</span><span class='rparen'>)</span>
   <span class='id identifier rubyid_pbDisplay'>pbDisplay</span><span class='lparen'>(</span><span class='id identifier rubyid__INTL'><span class='object_link'><a href="top-level-namespace.html#_INTL-instance_method" title="#_INTL (method)">_INTL</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>No puedes capturar a este Pokémon.</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_pokemon'>pokemon</span><span class='op'>=</span><span class='id identifier rubyid_battler'>battler</span><span class='period'>.</span><span class='id identifier rubyid_pokemon'>pokemon</span>
    <span class='id identifier rubyid_species'>species</span><span class='op'>=</span><span class='id identifier rubyid_pokemon'>pokemon</span><span class='period'>.</span><span class='id identifier rubyid_species'>species</span>
    <span class='kw'>if</span> <span class='gvar'>$DEBUG</span> <span class='op'>&amp;&amp;</span> <span class='const'><span class='object_link'><a href="Input.html" title="Input (module)">Input</a></span></span><span class='period'>.</span><span class='id identifier rubyid_press?'><span class='object_link'><a href="Input.html#press%3F-class_method" title="Input.press? (method)">press?</a></span></span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="Input.html" title="Input (module)">Input</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Input.html#CTRL-constant" title="Input::CTRL (constant)">CTRL</a></span></span><span class='rparen'>)</span>
      <span class='id identifier rubyid_shakes'>shakes</span><span class='op'>=</span><span class='int'>4</span>
    <span class='kw'>else</span>
      <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_rareness'>rareness</span>
        <span class='id identifier rubyid_dexdata'>dexdata</span><span class='op'>=</span><span class='id identifier rubyid_pbOpenDexData'>pbOpenDexData</span>
        <span class='id identifier rubyid_pbDexDataOffset'><span class='object_link'><a href="top-level-namespace.html#pbDexDataOffset-instance_method" title="#pbDexDataOffset (method)">pbDexDataOffset</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_dexdata'>dexdata</span><span class='comma'>,</span><span class='id identifier rubyid_species'>species</span><span class='comma'>,</span><span class='int'>16</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_rareness'>rareness</span><span class='op'>=</span><span class='id identifier rubyid_dexdata'>dexdata</span><span class='period'>.</span><span class='id identifier rubyid_fgetb'>fgetb</span> <span class='comment'># Get rareness from dexdata file
</span>        <span class='id identifier rubyid_dexdata'>dexdata</span><span class='period'>.</span><span class='id identifier rubyid_close'>close</span>
      <span class='kw'>end</span>
      <span class='id identifier rubyid_a'>a</span><span class='op'>=</span><span class='id identifier rubyid_battler'>battler</span><span class='period'>.</span><span class='id identifier rubyid_totalhp'>totalhp</span>
      <span class='id identifier rubyid_b'>b</span><span class='op'>=</span><span class='id identifier rubyid_battler'>battler</span><span class='period'>.</span><span class='id identifier rubyid_hp'>hp</span>
      <span class='id identifier rubyid_rareness'>rareness</span><span class='op'>=</span><span class='const'>BallHandlers</span><span class='period'>.</span><span class='id identifier rubyid_modifyCatchRate'>modifyCatchRate</span><span class='lparen'>(</span><span class='id identifier rubyid_ball'>ball</span><span class='comma'>,</span><span class='id identifier rubyid_rareness'>rareness</span><span class='comma'>,</span><span class='kw'>self</span><span class='comma'>,</span><span class='id identifier rubyid_battler'>battler</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_x'>x</span><span class='op'>=</span><span class='lparen'>(</span><span class='lparen'>(</span><span class='lparen'>(</span><span class='id identifier rubyid_a'>a</span><span class='op'>*</span><span class='int'>3</span><span class='op'>-</span><span class='id identifier rubyid_b'>b</span><span class='op'>*</span><span class='int'>2</span><span class='rparen'>)</span><span class='op'>*</span><span class='id identifier rubyid_rareness'>rareness</span><span class='rparen'>)</span><span class='op'>/</span><span class='lparen'>(</span><span class='id identifier rubyid_a'>a</span><span class='op'>*</span><span class='int'>3</span><span class='rparen'>)</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_floor'>floor</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_battler'>battler</span><span class='period'>.</span><span class='id identifier rubyid_status'>status</span><span class='op'>==</span><span class='const'>PBStatuses</span><span class='op'>::</span><span class='const'>SLEEP</span> <span class='op'>||</span> <span class='id identifier rubyid_battler'>battler</span><span class='period'>.</span><span class='id identifier rubyid_status'>status</span><span class='op'>==</span><span class='const'>PBStatuses</span><span class='op'>::</span><span class='const'>FROZEN</span>
        <span class='id identifier rubyid_x'>x</span><span class='op'>=</span><span class='lparen'>(</span><span class='id identifier rubyid_x'>x</span><span class='op'>*</span><span class='float'>2.5</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_floor'>floor</span>
      <span class='kw'>elsif</span> <span class='id identifier rubyid_battler'>battler</span><span class='period'>.</span><span class='id identifier rubyid_status'>status</span><span class='op'>!=</span><span class='int'>0</span>
        <span class='id identifier rubyid_x'>x</span><span class='op'>=</span><span class='lparen'>(</span><span class='id identifier rubyid_x'>x</span><span class='op'>*</span><span class='float'>1.5</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_floor'>floor</span>
      <span class='kw'>end</span>
      <span class='id identifier rubyid_c'>c</span><span class='op'>=</span><span class='int'>0</span>
      <span class='kw'>if</span> <span class='gvar'>$Trainer</span>
        <span class='kw'>if</span> <span class='gvar'>$Trainer</span><span class='period'>.</span><span class='id identifier rubyid_pokedexOwned'>pokedexOwned</span><span class='op'>&gt;</span><span class='int'>600</span>
          <span class='id identifier rubyid_c'>c</span><span class='op'>=</span><span class='lparen'>(</span><span class='id identifier rubyid_x'>x</span><span class='op'>*</span><span class='float'>2.5</span><span class='op'>/</span><span class='int'>6</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_floor'>floor</span>
        <span class='kw'>elsif</span> <span class='gvar'>$Trainer</span><span class='period'>.</span><span class='id identifier rubyid_pokedexOwned'>pokedexOwned</span><span class='op'>&gt;</span><span class='int'>450</span>
          <span class='id identifier rubyid_c'>c</span><span class='op'>=</span><span class='lparen'>(</span><span class='id identifier rubyid_x'>x</span><span class='op'>*</span><span class='int'>2</span><span class='op'>/</span><span class='int'>6</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_floor'>floor</span>
        <span class='kw'>elsif</span> <span class='gvar'>$Trainer</span><span class='period'>.</span><span class='id identifier rubyid_pokedexOwned'>pokedexOwned</span><span class='op'>&gt;</span><span class='int'>300</span>
          <span class='id identifier rubyid_c'>c</span><span class='op'>=</span><span class='lparen'>(</span><span class='id identifier rubyid_x'>x</span><span class='op'>*</span><span class='float'>1.5</span><span class='op'>/</span><span class='int'>6</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_floor'>floor</span>
        <span class='kw'>elsif</span> <span class='gvar'>$Trainer</span><span class='period'>.</span><span class='id identifier rubyid_pokedexOwned'>pokedexOwned</span><span class='op'>&gt;</span><span class='int'>150</span>
          <span class='id identifier rubyid_c'>c</span><span class='op'>=</span><span class='lparen'>(</span><span class='id identifier rubyid_x'>x</span><span class='op'>*</span><span class='int'>1</span><span class='op'>/</span><span class='int'>6</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_floor'>floor</span>
        <span class='kw'>elsif</span> <span class='gvar'>$Trainer</span><span class='period'>.</span><span class='id identifier rubyid_pokedexOwned'>pokedexOwned</span><span class='op'>&gt;</span><span class='int'>30</span>
          <span class='id identifier rubyid_c'>c</span><span class='op'>=</span><span class='lparen'>(</span><span class='id identifier rubyid_x'>x</span><span class='op'>*</span><span class='float'>0.5</span><span class='op'>/</span><span class='int'>6</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_floor'>floor</span>
        <span class='kw'>end</span>
      <span class='kw'>end</span>
      <span class='id identifier rubyid_shakes'>shakes</span><span class='op'>=</span><span class='int'>0</span><span class='semicolon'>;</span> <span class='id identifier rubyid_critical'>critical</span><span class='op'>=</span><span class='kw'>false</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_x'>x</span><span class='op'>&gt;</span><span class='int'>255</span> <span class='op'>||</span> <span class='const'><span class='object_link'><a href="BallHandlers.html" title="BallHandlers (module)">BallHandlers</a></span></span><span class='period'>.</span><span class='id identifier rubyid_isUnconditional?'><span class='object_link'><a href="BallHandlers.html#isUnconditional%3F-class_method" title="BallHandlers.isUnconditional? (method)">isUnconditional?</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_ball'>ball</span><span class='comma'>,</span><span class='kw'>self</span><span class='comma'>,</span><span class='id identifier rubyid_battler'>battler</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_shakes'>shakes</span><span class='op'>=</span><span class='int'>4</span>
      <span class='kw'>else</span>
        <span class='id identifier rubyid_x'>x</span><span class='op'>=</span><span class='int'>1</span> <span class='kw'>if</span> <span class='id identifier rubyid_x'>x</span><span class='op'>&lt;</span><span class='int'>1</span>
        <span class='id identifier rubyid_y'>y</span> <span class='op'>=</span> <span class='lparen'>(</span> <span class='int'>65536</span> <span class='op'>/</span> <span class='lparen'>(</span><span class='lparen'>(</span><span class='float'>255.0</span><span class='op'>/</span><span class='id identifier rubyid_x'>x</span><span class='rparen'>)</span><span class='op'>**</span><span class='float'>0.1875</span><span class='rparen'>)</span> <span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_floor'>floor</span>
        <span class='kw'>if</span> <span class='const'><span class='object_link'><a href="top-level-namespace.html#USECRITICALCAPTURE-constant" title="USECRITICALCAPTURE (constant)">USECRITICALCAPTURE</a></span></span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_pbRandom'>pbRandom</span><span class='lparen'>(</span><span class='int'>256</span><span class='rparen'>)</span><span class='op'>&lt;</span><span class='id identifier rubyid_c'>c</span>
          <span class='id identifier rubyid_critical'>critical</span><span class='op'>=</span><span class='kw'>true</span>
          <span class='id identifier rubyid_shakes'>shakes</span><span class='op'>=</span><span class='int'>4</span> <span class='kw'>if</span> <span class='id identifier rubyid_pbRandom'>pbRandom</span><span class='lparen'>(</span><span class='int'>65536</span><span class='rparen'>)</span><span class='op'>&lt;</span><span class='id identifier rubyid_y'>y</span>
        <span class='kw'>else</span>
          <span class='id identifier rubyid_shakes'>shakes</span><span class='op'>+=</span><span class='int'>1</span> <span class='kw'>if</span> <span class='id identifier rubyid_pbRandom'>pbRandom</span><span class='lparen'>(</span><span class='int'>65536</span><span class='rparen'>)</span><span class='op'>&lt;</span><span class='id identifier rubyid_y'>y</span>
          <span class='id identifier rubyid_shakes'>shakes</span><span class='op'>+=</span><span class='int'>1</span> <span class='kw'>if</span> <span class='id identifier rubyid_pbRandom'>pbRandom</span><span class='lparen'>(</span><span class='int'>65536</span><span class='rparen'>)</span><span class='op'>&lt;</span><span class='id identifier rubyid_y'>y</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_shakes'>shakes</span><span class='op'>==</span><span class='int'>1</span>
          <span class='id identifier rubyid_shakes'>shakes</span><span class='op'>+=</span><span class='int'>1</span> <span class='kw'>if</span> <span class='id identifier rubyid_pbRandom'>pbRandom</span><span class='lparen'>(</span><span class='int'>65536</span><span class='rparen'>)</span><span class='op'>&lt;</span><span class='id identifier rubyid_y'>y</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_shakes'>shakes</span><span class='op'>==</span><span class='int'>2</span>
          <span class='id identifier rubyid_shakes'>shakes</span><span class='op'>+=</span><span class='int'>1</span> <span class='kw'>if</span> <span class='id identifier rubyid_pbRandom'>pbRandom</span><span class='lparen'>(</span><span class='int'>65536</span><span class='rparen'>)</span><span class='op'>&lt;</span><span class='id identifier rubyid_y'>y</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_shakes'>shakes</span><span class='op'>==</span><span class='int'>3</span>
        <span class='kw'>end</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='const'><span class='object_link'><a href="PBDebug.html" title="PBDebug (module)">PBDebug</a></span></span><span class='period'>.</span><span class='id identifier rubyid_log'><span class='object_link'><a href="PBDebug.html#log-class_method" title="PBDebug.log (method)">log</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>[Poké Ball lanzada] </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_itemname'>itemname</span><span class='embexpr_end'>}</span><span class='tstring_content'>, </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_shakes'>shakes</span><span class='embexpr_end'>}</span><span class='tstring_content'> sacudidas (4=captura)</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='ivar'>@scene</span><span class='period'>.</span><span class='id identifier rubyid_pbThrow'>pbThrow</span><span class='lparen'>(</span><span class='id identifier rubyid_ball'>ball</span><span class='comma'>,</span><span class='lparen'>(</span><span class='id identifier rubyid_critical'>critical</span><span class='rparen'>)</span> <span class='op'>?</span> <span class='int'>1</span> <span class='op'>:</span> <span class='id identifier rubyid_shakes'>shakes</span><span class='comma'>,</span><span class='id identifier rubyid_critical'>critical</span><span class='comma'>,</span><span class='id identifier rubyid_battler'>battler</span><span class='period'>.</span><span class='id identifier rubyid_index'>index</span><span class='comma'>,</span><span class='id identifier rubyid_showplayer'>showplayer</span><span class='rparen'>)</span>
    <span class='kw'>case</span> <span class='id identifier rubyid_shakes'>shakes</span>
    <span class='kw'>when</span> <span class='int'>0</span>
      <span class='id identifier rubyid_pbDisplay'>pbDisplay</span><span class='lparen'>(</span><span class='id identifier rubyid__INTL'><span class='object_link'><a href="top-level-namespace.html#_INTL-instance_method" title="#_INTL (method)">_INTL</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>¡Oh no! ¡El Pokémon se ha escapado!</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='rparen'>)</span>
      <span class='const'><span class='object_link'><a href="BallHandlers.html" title="BallHandlers (module)">BallHandlers</a></span></span><span class='period'>.</span><span class='id identifier rubyid_onFailCatch'><span class='object_link'><a href="BallHandlers.html#onFailCatch-class_method" title="BallHandlers.onFailCatch (method)">onFailCatch</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_ball'>ball</span><span class='comma'>,</span><span class='kw'>self</span><span class='comma'>,</span><span class='id identifier rubyid_battler'>battler</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_ret'>ret</span><span class='op'>=</span><span class='id identifier rubyid_tryFetchingBall'>tryFetchingBall</span><span class='lparen'>(</span><span class='id identifier rubyid_ball'>ball</span><span class='comma'>,</span><span class='id identifier rubyid_safari'>safari</span><span class='comma'>,</span><span class='id identifier rubyid_firstfailedthrowatsafari'>firstfailedthrowatsafari</span><span class='rparen'>)</span>
    <span class='kw'>when</span> <span class='int'>1</span>
      <span class='id identifier rubyid_pbDisplay'>pbDisplay</span><span class='lparen'>(</span><span class='id identifier rubyid__INTL'><span class='object_link'><a href="top-level-namespace.html#_INTL-instance_method" title="#_INTL (method)">_INTL</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>¡Vaya! ¡Parecía que ya estaba capturado!</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='rparen'>)</span>
      <span class='const'><span class='object_link'><a href="BallHandlers.html" title="BallHandlers (module)">BallHandlers</a></span></span><span class='period'>.</span><span class='id identifier rubyid_onFailCatch'><span class='object_link'><a href="BallHandlers.html#onFailCatch-class_method" title="BallHandlers.onFailCatch (method)">onFailCatch</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_ball'>ball</span><span class='comma'>,</span><span class='kw'>self</span><span class='comma'>,</span><span class='id identifier rubyid_battler'>battler</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_ret'>ret</span><span class='op'>=</span><span class='id identifier rubyid_tryFetchingBall'>tryFetchingBall</span><span class='lparen'>(</span><span class='id identifier rubyid_ball'>ball</span><span class='comma'>,</span><span class='id identifier rubyid_safari'>safari</span><span class='comma'>,</span><span class='id identifier rubyid_firstfailedthrowatsafari'>firstfailedthrowatsafari</span><span class='rparen'>)</span>
    <span class='kw'>when</span> <span class='int'>2</span>
      <span class='id identifier rubyid_pbDisplay'>pbDisplay</span><span class='lparen'>(</span><span class='id identifier rubyid__INTL'><span class='object_link'><a href="top-level-namespace.html#_INTL-instance_method" title="#_INTL (method)">_INTL</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>¡Aargh! ¡Casi lo tenías!</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='rparen'>)</span>
      <span class='const'><span class='object_link'><a href="BallHandlers.html" title="BallHandlers (module)">BallHandlers</a></span></span><span class='period'>.</span><span class='id identifier rubyid_onFailCatch'><span class='object_link'><a href="BallHandlers.html#onFailCatch-class_method" title="BallHandlers.onFailCatch (method)">onFailCatch</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_ball'>ball</span><span class='comma'>,</span><span class='kw'>self</span><span class='comma'>,</span><span class='id identifier rubyid_battler'>battler</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_ret'>ret</span><span class='op'>=</span><span class='id identifier rubyid_tryFetchingBall'>tryFetchingBall</span><span class='lparen'>(</span><span class='id identifier rubyid_ball'>ball</span><span class='comma'>,</span><span class='id identifier rubyid_safari'>safari</span><span class='comma'>,</span><span class='id identifier rubyid_firstfailedthrowatsafari'>firstfailedthrowatsafari</span><span class='rparen'>)</span>
    <span class='kw'>when</span> <span class='int'>3</span>
      <span class='id identifier rubyid_pbDisplay'>pbDisplay</span><span class='lparen'>(</span><span class='id identifier rubyid__INTL'><span class='object_link'><a href="top-level-namespace.html#_INTL-instance_method" title="#_INTL (method)">_INTL</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>¡Uy! ¡Estuvo demasiado cerca!</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='rparen'>)</span>
      <span class='const'><span class='object_link'><a href="BallHandlers.html" title="BallHandlers (module)">BallHandlers</a></span></span><span class='period'>.</span><span class='id identifier rubyid_onFailCatch'><span class='object_link'><a href="BallHandlers.html#onFailCatch-class_method" title="BallHandlers.onFailCatch (method)">onFailCatch</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_ball'>ball</span><span class='comma'>,</span><span class='kw'>self</span><span class='comma'>,</span><span class='id identifier rubyid_battler'>battler</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_ret'>ret</span><span class='op'>=</span><span class='id identifier rubyid_tryFetchingBall'>tryFetchingBall</span><span class='lparen'>(</span><span class='id identifier rubyid_ball'>ball</span><span class='comma'>,</span><span class='id identifier rubyid_safari'>safari</span><span class='comma'>,</span><span class='id identifier rubyid_firstfailedthrowatsafari'>firstfailedthrowatsafari</span><span class='rparen'>)</span>
    <span class='kw'>when</span> <span class='int'>4</span>
      <span class='id identifier rubyid_pbDisplayBrief'>pbDisplayBrief</span><span class='lparen'>(</span><span class='id identifier rubyid__INTL'><span class='object_link'><a href="top-level-namespace.html#_INTL-instance_method" title="#_INTL (method)">_INTL</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>¡Sí! ¡{1} ha sido capturado!</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span><span class='id identifier rubyid_pokemon'>pokemon</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span><span class='rparen'>)</span>
      <span class='ivar'>@scene</span><span class='period'>.</span><span class='id identifier rubyid_pbThrowSuccess'>pbThrowSuccess</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_pbIsSnagBall?'><span class='object_link'><a href="top-level-namespace.html#pbIsSnagBall%3F-instance_method" title="#pbIsSnagBall? (method)">pbIsSnagBall?</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_ball'>ball</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='ivar'>@opponent</span>
        <span class='id identifier rubyid_pbRemoveFromParty'>pbRemoveFromParty</span><span class='lparen'>(</span><span class='id identifier rubyid_battler'>battler</span><span class='period'>.</span><span class='id identifier rubyid_index'>index</span><span class='comma'>,</span><span class='id identifier rubyid_battler'>battler</span><span class='period'>.</span><span class='id identifier rubyid_pokemonIndex'>pokemonIndex</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_battler'>battler</span><span class='period'>.</span><span class='id identifier rubyid_pbReset'>pbReset</span>
        <span class='id identifier rubyid_battler'>battler</span><span class='period'>.</span><span class='id identifier rubyid_participants'>participants</span><span class='op'>=</span><span class='lbracket'>[</span><span class='rbracket'>]</span>
      <span class='kw'>else</span>
        <span class='ivar'>@decision</span><span class='op'>=</span><span class='int'>4</span>
      <span class='kw'>end</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_pbIsSnagBall?'><span class='object_link'><a href="top-level-namespace.html#pbIsSnagBall%3F-instance_method" title="#pbIsSnagBall? (method)">pbIsSnagBall?</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_ball'>ball</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_pokemon'>pokemon</span><span class='period'>.</span><span class='id identifier rubyid_ot'>ot</span><span class='op'>=</span><span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_pbPlayer'>pbPlayer</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span>
        <span class='id identifier rubyid_pokemon'>pokemon</span><span class='period'>.</span><span class='id identifier rubyid_trainerID'>trainerID</span><span class='op'>=</span><span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_pbPlayer'>pbPlayer</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span>
      <span class='kw'>end</span>
      <span class='const'><span class='object_link'><a href="BallHandlers.html" title="BallHandlers (module)">BallHandlers</a></span></span><span class='period'>.</span><span class='id identifier rubyid_onCatch'><span class='object_link'><a href="BallHandlers.html#onCatch-class_method" title="BallHandlers.onCatch (method)">onCatch</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_ball'>ball</span><span class='comma'>,</span><span class='kw'>self</span><span class='comma'>,</span><span class='id identifier rubyid_pokemon'>pokemon</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_pokemon'>pokemon</span><span class='period'>.</span><span class='id identifier rubyid_ballused'>ballused</span><span class='op'>=</span><span class='id identifier rubyid_pbGetBallType'>pbGetBallType</span><span class='lparen'>(</span><span class='id identifier rubyid_ball'>ball</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_pokemon'>pokemon</span><span class='period'>.</span><span class='id identifier rubyid_makeUnmega'>makeUnmega</span> <span class='kw'>rescue</span> <span class='kw'>nil</span>
      <span class='id identifier rubyid_pokemon'>pokemon</span><span class='period'>.</span><span class='id identifier rubyid_makeUnprimal'>makeUnprimal</span> <span class='kw'>rescue</span> <span class='kw'>nil</span>
      <span class='id identifier rubyid_pokemon'>pokemon</span><span class='period'>.</span><span class='id identifier rubyid_makeUnultra'>makeUnultra</span> <span class='kw'>rescue</span> <span class='kw'>nil</span>
      <span class='id identifier rubyid_pokemon'>pokemon</span><span class='period'>.</span><span class='id identifier rubyid_revertOtherForms'>revertOtherForms</span> <span class='kw'>rescue</span> <span class='kw'>nil</span>
      <span class='id identifier rubyid_pokemon'>pokemon</span><span class='period'>.</span><span class='id identifier rubyid_pbRecordFirstMoves'>pbRecordFirstMoves</span>
      <span class='kw'>if</span> <span class='const'><span class='object_link'><a href="top-level-namespace.html#GAINEXPFORCAPTURE-constant" title="GAINEXPFORCAPTURE (constant)">GAINEXPFORCAPTURE</a></span></span>
        <span class='id identifier rubyid_battler'>battler</span><span class='period'>.</span><span class='id identifier rubyid_captured'>captured</span><span class='op'>=</span><span class='kw'>true</span>
        <span class='id identifier rubyid_pbGainEXP'>pbGainEXP</span>
        <span class='id identifier rubyid_battler'>battler</span><span class='period'>.</span><span class='id identifier rubyid_captured'>captured</span><span class='op'>=</span><span class='kw'>false</span>
      <span class='kw'>end</span>
      <span class='kw'>if</span> <span class='op'>!</span><span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_pbPlayer'>pbPlayer</span><span class='period'>.</span><span class='id identifier rubyid_hasOwned?'>hasOwned?</span><span class='lparen'>(</span><span class='id identifier rubyid_species'>species</span><span class='rparen'>)</span>
        <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_pbPlayer'>pbPlayer</span><span class='period'>.</span><span class='id identifier rubyid_setOwned'>setOwned</span><span class='lparen'>(</span><span class='id identifier rubyid_species'>species</span><span class='rparen'>)</span>
        <span class='kw'>if</span> <span class='gvar'>$Trainer</span><span class='period'>.</span><span class='id identifier rubyid_pokedex'>pokedex</span>
          <span class='id identifier rubyid_pbDisplayPaused'>pbDisplayPaused</span><span class='lparen'>(</span><span class='id identifier rubyid__INTL'><span class='object_link'><a href="top-level-namespace.html#_INTL-instance_method" title="#_INTL (method)">_INTL</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Se agregaron los datos de {1} en la Pokédex.</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span><span class='id identifier rubyid_pokemon'>pokemon</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span><span class='rparen'>)</span>
          <span class='ivar'>@scene</span><span class='period'>.</span><span class='id identifier rubyid_pbShowPokedex'>pbShowPokedex</span><span class='lparen'>(</span><span class='id identifier rubyid_species'>species</span><span class='rparen'>)</span>
        <span class='kw'>end</span>
      <span class='kw'>end</span>
      <span class='ivar'>@scene</span><span class='period'>.</span><span class='id identifier rubyid_pbHideCaptureBall'>pbHideCaptureBall</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_pbIsSnagBall?'><span class='object_link'><a href="top-level-namespace.html#pbIsSnagBall%3F-instance_method" title="#pbIsSnagBall? (method)">pbIsSnagBall?</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_ball'>ball</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='ivar'>@opponent</span>
        <span class='id identifier rubyid_pokemon'>pokemon</span><span class='period'>.</span><span class='id identifier rubyid_pbUpdateShadowMoves'>pbUpdateShadowMoves</span> <span class='kw'>rescue</span> <span class='kw'>nil</span>
        <span class='ivar'>@snaggedpokemon</span><span class='period'>.</span><span class='id identifier rubyid_push'>push</span><span class='lparen'>(</span><span class='id identifier rubyid_pokemon'>pokemon</span><span class='rparen'>)</span>
      <span class='kw'>else</span>
        <span class='id identifier rubyid_pbStorePokemon'>pbStorePokemon</span><span class='lparen'>(</span><span class='id identifier rubyid_pokemon'>pokemon</span><span class='rparen'>)</span>
      <span class='kw'>end</span>
      <span class='id identifier rubyid_ret'>ret</span><span class='op'>=</span><span class='int'>1</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='kw'>return</span> <span class='id identifier rubyid_ret'>ret</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="tryFetchingBall-instance_method">
  
    #<strong>tryFetchingBall</strong>(ball, safari, firstfailedthrowatsafari)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Ball Fetch</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'scripts/PokeBattle_Battle.rb', line 45</span>

<span class='kw'>def</span> <span class='id identifier rubyid_tryFetchingBall'>tryFetchingBall</span><span class='lparen'>(</span><span class='id identifier rubyid_ball'>ball</span><span class='comma'>,</span><span class='id identifier rubyid_safari'>safari</span><span class='comma'>,</span><span class='id identifier rubyid_firstfailedthrowatsafari'>firstfailedthrowatsafari</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_ret'>ret</span><span class='op'>=</span><span class='int'>0</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_safari'>safari</span>
    <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_firstfailedthrowatsafari'>firstfailedthrowatsafari</span>
      <span class='kw'>for</span> <span class='id identifier rubyid_i'>i</span> <span class='kw'>in</span> <span class='int'>0</span><span class='op'>...</span><span class='gvar'>$Trainer</span><span class='period'>.</span><span class='id identifier rubyid_party'>party</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_isConst?'>isConst?</span><span class='lparen'>(</span><span class='gvar'>$Trainer</span><span class='period'>.</span><span class='id identifier rubyid_party'>party</span><span class='lbracket'>[</span><span class='id identifier rubyid_i'>i</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_ability'>ability</span><span class='comma'>,</span><span class='const'><span class='object_link'><a href="PBAbilities.html" title="PBAbilities (class)">PBAbilities</a></span></span><span class='comma'>,</span><span class='symbol'>:BALLFETCH</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span>
          <span class='gvar'>$Trainer</span><span class='period'>.</span><span class='id identifier rubyid_party'>party</span><span class='lbracket'>[</span><span class='id identifier rubyid_i'>i</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_item'>item</span> <span class='op'>&lt;=</span> <span class='int'>0</span>
          <span class='id identifier rubyid_pbDisplay'>pbDisplay</span><span class='lparen'>(</span><span class='id identifier rubyid__INTL'><span class='object_link'><a href="top-level-namespace.html#_INTL-instance_method" title="#_INTL (method)">_INTL</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>¡{1} ha encontrado una {2}!</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span><span class='gvar'>$Trainer</span><span class='period'>.</span><span class='id identifier rubyid_party'>party</span><span class='lbracket'>[</span><span class='id identifier rubyid_i'>i</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span><span class='const'><span class='object_link'><a href="PBItems.html" title="PBItems (class)">PBItems</a></span></span><span class='period'>.</span><span class='id identifier rubyid_getName'><span class='object_link'><a href="PBItems.html#getName-class_method" title="PBItems.getName (method)">getName</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_ball'>ball</span><span class='rparen'>)</span><span class='rparen'>)</span><span class='rparen'>)</span>
          <span class='const'><span class='object_link'><a href="PBDebug.html" title="PBDebug (module)">PBDebug</a></span></span><span class='period'>.</span><span class='id identifier rubyid_log'><span class='object_link'><a href="PBDebug.html#log-class_method" title="PBDebug.log (method)">log</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>[Ability triggered] </span><span class='embexpr_beg'>#{</span><span class='gvar'>$Trainer</span><span class='period'>.</span><span class='id identifier rubyid_party'>party</span><span class='lbracket'>[</span><span class='id identifier rubyid_i'>i</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'> fetched the </span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="PBItems.html" title="PBItems (class)">PBItems</a></span></span><span class='period'>.</span><span class='id identifier rubyid_getName'><span class='object_link'><a href="PBItems.html#getName-class_method" title="PBItems.getName (method)">getName</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_ball'>ball</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
          <span class='id identifier rubyid_ret'>ret</span><span class='op'>=</span><span class='op'>-</span><span class='int'>1</span>
          <span class='kw'>break</span>
        <span class='kw'>end</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>else</span>
    <span class='kw'>if</span> <span class='op'>!</span><span class='ivar'>@firstfailedthrow</span>
      <span class='kw'>for</span> <span class='id identifier rubyid_i'>i</span> <span class='kw'>in</span> <span class='int'>0</span><span class='op'>...</span><span class='gvar'>$Trainer</span><span class='period'>.</span><span class='id identifier rubyid_party'>party</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_isConst?'>isConst?</span><span class='lparen'>(</span><span class='gvar'>$Trainer</span><span class='period'>.</span><span class='id identifier rubyid_party'>party</span><span class='lbracket'>[</span><span class='id identifier rubyid_i'>i</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_ability'>ability</span><span class='comma'>,</span><span class='const'><span class='object_link'><a href="PBAbilities.html" title="PBAbilities (class)">PBAbilities</a></span></span><span class='comma'>,</span><span class='symbol'>:BALLFETCH</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span>
          <span class='gvar'>$Trainer</span><span class='period'>.</span><span class='id identifier rubyid_party'>party</span><span class='lbracket'>[</span><span class='id identifier rubyid_i'>i</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_item'>item</span> <span class='op'>&lt;=</span> <span class='int'>0</span>
          <span class='gvar'>$Trainer</span><span class='period'>.</span><span class='id identifier rubyid_party'>party</span><span class='lbracket'>[</span><span class='id identifier rubyid_i'>i</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_item'>item</span><span class='op'>=</span><span class='id identifier rubyid_ball'>ball</span>
          <span class='gvar'>$Trainer</span><span class='period'>.</span><span class='id identifier rubyid_party'>party</span><span class='lbracket'>[</span><span class='id identifier rubyid_i'>i</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_itemInitial'>itemInitial</span><span class='op'>=</span><span class='id identifier rubyid_ball'>ball</span>
          <span class='id identifier rubyid_pbDisplay'>pbDisplay</span><span class='lparen'>(</span><span class='id identifier rubyid__INTL'><span class='object_link'><a href="top-level-namespace.html#_INTL-instance_method" title="#_INTL (method)">_INTL</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>¡{1} ha encontrado una {2}!</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span><span class='gvar'>$Trainer</span><span class='period'>.</span><span class='id identifier rubyid_party'>party</span><span class='lbracket'>[</span><span class='id identifier rubyid_i'>i</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span><span class='const'><span class='object_link'><a href="PBItems.html" title="PBItems (class)">PBItems</a></span></span><span class='period'>.</span><span class='id identifier rubyid_getName'><span class='object_link'><a href="PBItems.html#getName-class_method" title="PBItems.getName (method)">getName</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_ball'>ball</span><span class='rparen'>)</span><span class='rparen'>)</span><span class='rparen'>)</span>
          <span class='const'><span class='object_link'><a href="PBDebug.html" title="PBDebug (module)">PBDebug</a></span></span><span class='period'>.</span><span class='id identifier rubyid_log'><span class='object_link'><a href="PBDebug.html#log-class_method" title="PBDebug.log (method)">log</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>[Ability triggered] </span><span class='embexpr_beg'>#{</span><span class='gvar'>$Trainer</span><span class='period'>.</span><span class='id identifier rubyid_party'>party</span><span class='lbracket'>[</span><span class='id identifier rubyid_i'>i</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'> fetched the </span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="PBItems.html" title="PBItems (class)">PBItems</a></span></span><span class='period'>.</span><span class='id identifier rubyid_getName'><span class='object_link'><a href="PBItems.html#getName-class_method" title="PBItems.getName (method)">getName</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_ball'>ball</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
          <span class='id identifier rubyid_ret'>ret</span><span class='op'>=</span><span class='op'>-</span><span class='int'>1</span>
          <span class='kw'>break</span>
        <span class='kw'>end</span>
      <span class='kw'>end</span>
      <span class='ivar'>@firstfailedthrow</span><span class='op'>=</span><span class='kw'>true</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='kw'>return</span> <span class='id identifier rubyid_ret'>ret</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Thu May 19 20:12:21 2022 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.27 (ruby-2.7.5).
</div>

    </div>
  </body>
</html>